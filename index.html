<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ç‰©ç†æ²»ç™‚ç´€éŒ„ç”¢ç”Ÿå™¨ï¼ˆæœ€æ–°ç‰ˆï¼‹å¿…å¡«æª¢æŸ¥ç‰ˆï¼‰</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; max-width: 600px; margin: auto; }
h2 { margin-top: 30px; cursor: pointer; background: #eee; padding: 10px; }
.section { margin-bottom: 30px; display: none; }
.item { margin-bottom: 12px; display: flex; align-items: center; flex-wrap: wrap; }
.item label { flex: 1 1 120px; }
.item input[type="text"], .item input[type="date"], .item select { flex: 2 1 200px; margin-left: 5px; }
textarea { width: 100%; height: 200px; }
button { margin: 10px 0; padding: 10px 20px; width: 100%; }
</style>
</head>
<body>

<h1>ç‰©ç†æ²»ç™‚ç´€éŒ„ç”¢ç”Ÿå™¨</h1>

<div id="form"></div>

<button onclick="generate()">ç”¢ç”Ÿæ–‡æ¡ˆ</button>
<button onclick="copyText()">è¤‡è£½æ–‡æ¡ˆ</button>

<h2>ç”Ÿæˆæ–‡æ¡ˆ</h2>
<textarea id="output"></textarea>

<script>
const sections = [
    ["åŸºæœ¬è³‡æ–™", ["å®¢æˆ¶åç¨±", "ç‰©ç†æ²»ç™‚å¸«åç¨±", "æœå‹™æ—¥æœŸ", "æ˜¯å¦ç‚ºç¬¬ä¸€æ¬¡æœå‹™"]],
    ["å®¢æˆ¶ä¸»è¨´", ["é ¸éƒ¨", "èƒŒéƒ¨", "è…°éƒ¨", "è…¹éƒ¨", "è‚©è†€", "æ‰‹è‚˜", "æ‰‹è…•", "é«–", "è†", "è¸", "å…¶ä»–"]],
    ["éœæ…‹è©•ä¼°", ["è„–å­å‰å‚¾", "é«˜ä½è‚©", "é§èƒŒ", "è…°æ¤å‰å‡¸", "è„ŠæŸ±å´å½", "éª¨ç›†å‰å‚¾", "éª¨ç›†å¾Œå‚¾", "é•·çŸ­è…³", "è†å…§ç¿»", "è†å¤–ç¿»", "è¶³å…§ç¿»", "è¶³å¤–ç¿»", "æ‰å¹³è¶³", "é«˜å¼“è¶³", "å…¶ä»–"]],
    ["æ´»å‹•åº¦ä¸è¶³", ["é ¸éƒ¨", "èƒŒéƒ¨", "è…°éƒ¨", "è…¹éƒ¨", "è‚©è†€", "æ‰‹è‚˜", "æ‰‹è…•", "é«–", "è†", "è¸", "å…¶ä»–"]],
    ["è‚Œè€åŠ›ä¸è¶³/åŠŸèƒ½å¤±å¸¸", ["é ¸éƒ¨", "èƒŒéƒ¨", "è…°éƒ¨", "è…¹éƒ¨", "è‚©è†€", "æ‰‹è‚˜", "æ‰‹è…•", "é«–", "è†", "è¸", "å…¶ä»–"]],
    ["ç·Šç¹ƒç­‹è†œ", ["é ¸éƒ¨", "èƒŒéƒ¨", "è…°éƒ¨", "è…¹éƒ¨", "è‚©è†€", "æ‰‹è‚˜", "æ‰‹è…•", "é«–", "è†", "è¸", "å…¶ä»–"]],
    ["æœ¬æ¬¡æ”¾é¬†", ["è‚©é ¸ç­‹è†œ", "èƒ¸è…°ç­‹è†œ", "æ‰‹è‡‚ç­‹è†œ", "è…¹éƒ¨ç­‹è†œ", "å¤§è…¿å‰å´", "å¤§è…¿å¾Œå´", "å¤§è…¿å…§å´", "å¤§è…¿å¤–å´", "å°è…¿å‰å´", "å°è…¿å¾Œå´", "è‡€éƒ¨ç­‹è†œ", "è†é—œç¯€", "è¶³åº•", "å…¶ä»–"]],
    ["æœ¬æ¬¡ä¼¸å±•", ["è‚©é ¸ç­‹è†œ", "èƒ¸è…°ç­‹è†œ", "æ‰‹è‡‚ç­‹è†œ", "è…¹éƒ¨ç­‹è†œ", "å¤§è…¿å‰å´", "å¤§è…¿å¾Œå´", "å¤§è…¿å…§å´", "å¤§è…¿å¤–å´", "å°è…¿å‰å´", "å°è…¿å¾Œå´", "è‡€éƒ¨ç­‹è†œ", "è†é—œç¯€", "è¶³åº•", "å…¶ä»–"]],
    ["æœ¬æ¬¡è¨“ç·´", ["é ¸æ·±è‚Œç¾¤", "è…¹éƒ¨æ ¸å¿ƒ", "éª¨ç›†åº•è‚Œ", "æ·±è‡€è‚Œç¾¤", "å¤§è…¿å‰å´", "å¤§è…¿å¾Œå´", "å°è…¿å‰å´", "å°è…¿å¾Œå´", "å…¶ä»–"]],
    ["å…¶ä»–è™•ç†", ["å…§è‡Ÿç­‹è†œé¬†å‹•", "ç¥ç¶“é¬†å‹•", "å…¶ä»–"]],
    ["å›å®¶åŠŸèª²-ç‘œçˆä¼¸å±•", ["è‚©é ¸ç­‹è†œ", "èƒ¸è…°ç­‹è†œ", "æ‰‹è‡‚ç­‹è†œ", "è…¹éƒ¨ç­‹è†œ", "å¤§è…¿å‰å´", "å¤§è…¿å¾Œå´", "å¤§è…¿å…§å´", "å¤§è…¿å¤–å´", "å°è…¿å‰å´", "å°è…¿å¾Œå´", "è‡€éƒ¨ç­‹è†œ", "è†é—œç¯€", "è¶³åº•", "å…¶ä»–"]],
    ["å›å®¶åŠŸèª²-è¨“ç·´", ["é ¸æ·±è‚Œç¾¤", "è…¹éƒ¨æ ¸å¿ƒ", "éª¨ç›†åº•è‚Œ", "æ·±è‡€è‚Œç¾¤", "å¤§è…¿å‰å´", "å¤§è…¿å¾Œå´", "å°è…¿å‰å´", "å°è…¿å¾Œå´", "å…¶ä»–"]],
    ["å›å®¶åŠŸèª²-å…¶ä»–", ["å§¿æ…‹çŸ¯æ­£", "ç¥ç¶“å‹•æ…‹ä¼¸å±•", "å‘¼å¸è¨“ç·´", "å¹³è¡¡è¨“ç·´", "å…¶ä»–"]],
    ["å»ºè­°è™•ç†æ™‚é–“", ["ä¸€é€±å…§", "å…©é€±å…§", "ä¸€å€‹æœˆå…§", "å…¶ä»–"]],
    ["å…¶ä»–å»ºè­°", ["é‹å¢Šå»ºè­°", "è½‰ä»‹é†«å¸«", "å…¶ä»–"]]
];

const form = document.getElementById('form');
sections.forEach(([title, items]) => {
    const h2 = document.createElement('h2');
    h2.textContent = title;
    h2.onclick = () => section.style.display = section.style.display === 'none' ? 'block' : 'none';
    form.appendChild(h2);
    const section = document.createElement('div');
    section.className = 'section';

    items.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';

        if (title === "åŸºæœ¬è³‡æ–™") {
            if (item === "æœå‹™æ—¥æœŸ") {
                div.innerHTML = `<label>${item}</label><input type="date">`;
            } else if (item === "æ˜¯å¦ç‚ºç¬¬ä¸€æ¬¡æœå‹™") {
                div.innerHTML = `<label>${item}</label><select><option>æ˜¯</option><option>å¦</option></select>`;
            } else {
                div.innerHTML = `<label>${item}</label><input type="text">`;
            }
        } else {
            div.innerHTML = `<label><input type="checkbox" value="${item}"> ${item}</label> <input type="text" placeholder="è£œå……ï¼ˆå¯ä¸å¡«ï¼‰">`;
            div.querySelector('input[type="checkbox"]').addEventListener('change', (e) => {
                div.querySelector('input[type="text"]').style.display = e.target.checked ? 'inline-block' : 'none';
            });
        }

        section.appendChild(div);
    });

    form.appendChild(section);
});

function getSectionText(title) {
    const section = [...document.querySelectorAll('h2')].find(h2 => h2.textContent === title).nextElementSibling;
    const items = [...section.querySelectorAll('.item')];
    const result = items.filter(i => i.querySelector('input[type="checkbox"]')?.checked)
                                            .map(i => {
        const val = i.querySelector('input[type="checkbox"]').value;
        const note = i.querySelector('input[type="text"]').value.trim();
        return note ? `${val}ï¼ˆ${note}ï¼‰` : val;
    });
    return result.length > 0 ? result : null;
}

function getBasicData(title) {
    const section = [...document.querySelectorAll('h2')].find(h2 => h2.textContent === "åŸºæœ¬è³‡æ–™").nextElementSibling;
    const items = [...section.querySelectorAll('.item')];
    const input = items.find(i => i.querySelector('label').textContent === title)?.querySelector('input, select');
    return input?.value || "";
}

function generate() {
    const g = t => getSectionText(t);

    const client = getBasicData("å®¢æˆ¶åç¨±");
    const therapist = getBasicData("ç‰©ç†æ²»ç™‚å¸«åç¨±");
    const date = getBasicData("æœå‹™æ—¥æœŸ");
    const firstTime = getBasicData("æ˜¯å¦ç‚ºç¬¬ä¸€æ¬¡æœå‹™");
    const suggest = g('å»ºè­°è™•ç†æ™‚é–“');

    if (!client || !therapist || !date || !firstTime) {
        alert("ã€åŸºæœ¬è³‡æ–™ã€‘ç‚ºå¿…å¡«ï¼Œè«‹å®Œæ•´å¡«å¯«ï¼");
        return;
    }

    if (!suggest) {
        alert("è«‹å‹¾é¸ã€å»ºè­°è™•ç†æ™‚é–“ã€‘ï¼");
        return;
    }

    let result = `${client}æ‚¨å¥½ï½æˆ‘æ˜¯ç‰©ç†æ²»ç™‚å¸«${therapist}ï¼Œæœ¬æ¬¡${date}è™•ç†çš„é‡é»ï½\n`;

    if (g('å®¢æˆ¶ä¸»è¨´')) result += `ğŸ”º ${g('å®¢æˆ¶ä¸»è¨´').join('ã€')}\n\n`;

    const summary = [];
    if (g('éœæ…‹è©•ä¼°')) summary.push(`- éœæ…‹è©•ä¼°ï¼š${g('éœæ…‹è©•ä¼°').join('ã€')}`);
    if (g('æ´»å‹•åº¦ä¸è¶³')) summary.push(`- æ´»å‹•åº¦ä¸è¶³ï¼š${g('æ´»å‹•åº¦ä¸è¶³').join('ã€')}`);
    if (g('è‚Œè€åŠ›ä¸è¶³/åŠŸèƒ½å¤±å¸¸')) summary.push(`- è‚Œè€åŠ›ä¸è¶³/åŠŸèƒ½å¤±å¸¸ï¼š${g('è‚Œè€åŠ›ä¸è¶³/åŠŸèƒ½å¤±å¸¸').join('ã€')}`);
    if (g('ç·Šç¹ƒç­‹è†œ')) summary.push(`- ç·Šç¹ƒç­‹è†œï¼š${g('ç·Šç¹ƒç­‹è†œ').join('ã€')}`);
    if (summary.length) result += `ğŸ”º è©•ä¼°æ‘˜è¦ï¼š\n${summary.join('\n')}\n\n`;

    const process = [];
    if (g('æœ¬æ¬¡æ”¾é¬†')) process.push(`- æ”¾é¬†ï¼š${g('æœ¬æ¬¡æ”¾é¬†').join('ã€')}`);
    if (g('æœ¬æ¬¡ä¼¸å±•')) process.push(`- ä¼¸å±•ï¼š${g('æœ¬æ¬¡ä¼¸å±•').join('ã€')}`);
    if (g('æœ¬æ¬¡è¨“ç·´')) process.push(`- è¨“ç·´ï¼š${g('æœ¬æ¬¡è¨“ç·´').join('ã€')}`);
    if (g('å…¶ä»–è™•ç†')) process.push(`- ç‰¹æ®Šï¼š${g('å…¶ä»–è™•ç†').join('ã€')}`);
    if (process.length) result += `ğŸ”º æœ¬æ¬¡è™•ç†å…§å®¹ï¼š\n${process.join('\n')}\n\n`;

    const home = [];
    if (g('å›å®¶åŠŸèª²-ç‘œçˆä¼¸å±•')) home.push(`- ç‘œçˆä¼¸å±•ï¼š${g('å›å®¶åŠŸèª²-ç‘œçˆä¼¸å±•').join('ã€')}`);
    if (g('å›å®¶åŠŸèª²-è¨“ç·´')) home.push(`- è‚ŒåŠ›è¨“ç·´ï¼š${g('å›å®¶åŠŸèª²-è¨“ç·´').join('ã€')}`);
    if (g('å›å®¶åŠŸèª²-å…¶ä»–')) home.push(`- å…¶ä»–ï¼š${g('å›å®¶åŠŸèª²-å…¶ä»–').join('ã€')}`);
    if (home.length) result += `ğŸ”º å›å®¶é‹å‹•ï¼š\n${home.join('\n')}\n\n`;

    result += `ğŸ”º å…¶ä»–å»ºè­°ï¼š\nå›å®¶å¤šè£œå……æ°´åˆ†ã€Bç¾¤åŠ å¼·ä»£è¬ï¼Œç·©è§£ä¸é©ã€‚\nğŸ™Œ è·Ÿæ‚¨åˆ†äº«æœ€æ–°çš„æ´»å‹•ï¼Œå–œæ­¡æˆ‘å€‘çš„æœå‹™ä¹Ÿæ­¡è¿ä»‹ç´¹çµ¦è¦ªæœ‹å¥½å‹ï¼Œæ¯ä»‹ç´¹ä¸€ä½å³å¯å¾—ã€250å…ƒæŠ˜æŠµé‡‘ï¼ã€‘\n`;

    if (g('å…¶ä»–å»ºè­°')) result += `(p.s. ${g('å…¶ä»–å»ºè­°').join('ã€')})\n`;

    result += `å»ºè­°é ç´„${suggest.join('ã€')}æŒçºŒè™•ç†ï¼Œç›®å‰${therapist}è€å¸«æœ‰ç©ºæª”çš„æ™‚é–“`;

    document.getElementById('output').value = result;
}

function copyText() {
    const textArea = document.getElementById('output');
    textArea.select();
    document.execCommand('copy');
    alert("å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼");
}
</script>

</body>
</html>